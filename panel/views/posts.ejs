<%- include('layout', { body: ` <div class="page-header">
    <h1>G√∂nderi G√∂revleri</h1>
    </div>

    ${error ? '<div class="alert alert-error">' + error + '</div>' : ''}
    ${success ? '<div class="alert alert-success">' + success + '</div>' : ''}

    <div class="card">
        <div class="card-header">
            <h3>Yeni G√∂nderi G√∂revi Ekle</h3>
        </div>
        <div class="card-body">
            <form action="/posts/add" method="POST" class="post-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>G√∂nderi URL</label>
                        <input type="url" name="postUrl" placeholder="Facebook g√∂nderi URL'si" required>
                    </div>
                    <div class="form-group">
                        <label>Eylem</label>
                        <select name="action" id="actionSelect" required onchange="toggleCommentField()">
                            <option value="">Se√ßin</option>
                            <option value="like">üëç Beƒüen</option>
                            <option value="comment">üí¨ Yorum Yap</option>
                            <option value="share">üîÑ Payla≈ü</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" id="commentGroup" style="display:none">
                    <label>Yorum Metni</label>
                    <textarea name="commentText" rows="3" placeholder="Yazƒ±lacak yorum..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary">G√∂revi Ekle</button>
            </form>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h3>G√∂rev Listesi</h3>
        </div>
        <div class="card-body">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>URL</th>
                        <th>Eylem</th>
                        <th>Yorum</th>
                        <th>Durum</th>
                        <th>ƒ∞≈ülemler</th>
                    </tr>
                </thead>
                <tbody>
                    ${posts.length === 0 ? '<tr>
                        <td colspan="6" class="text-center">Hen√ºz g√∂nderi g√∂revi eklenmedi</td>
                    </tr>' : ''}
                    ${posts.map(post => `
                    <tr>
                        <td>${post.id}</td>
                        <td><a href="${post.postUrl}" target="_blank" class="link">${post.postUrl.substring(0,
                                40)}...</a></td>
                        <td>${post.action === 'like' ? 'üëç Beƒüen' : post.action === 'comment' ? 'üí¨ Yorum' : 'üîÑ
                            Payla≈ü'}</td>
                        <td>${post.commentText ? post.commentText.substring(0, 30) + '...' : '-'}</td>
                        <td>
                            <span
                                class="status-badge ${post.status === 'completed' ? 'success' : post.status === 'failed' ? 'danger' : 'warning'}">
                                ${post.status === 'completed' ? 'Tamamlandƒ±' : post.status === 'failed' ? 'Ba≈üarƒ±sƒ±z' :
                                'Bekliyor'}
                            </span>
                        </td>
                        <td class="actions">
                            <form action="/posts/retry/${post.id}" method="POST" style="display:inline">
                                <button type="submit" class="btn btn-sm btn-warning">Yeniden Dene</button>
                            </form>
                            <form action="/posts/delete/${post.id}" method="POST" style="display:inline"
                                onsubmit="return confirm('Bu g√∂revi silmek istediƒüinize emin misiniz?')">
                                <button type="submit" class="btn btn-sm btn-danger">Sil</button>
                            </form>
                        </td>
                    </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
    </div>

    <script>
        function toggleCommentField() {
            const select = document.getElementById('actionSelect');
            const commentGroup = document.getElementById('commentGroup');
            commentGroup.style.display = select.value === 'comment' ? 'block' : 'none';
        }
    </script>
    ` }) %>